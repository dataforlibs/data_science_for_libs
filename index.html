<!DOCTYPE html>
<html>
  <head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="js/smtp.js"></script>
    <script src="js/d3.v4.min.js"></script>

    <title>Data Science in Libraries</title>

    <!-- slider stylesheet -->
    <link
      rel="stylesheet"
      type="text/css"
      href="css/owl.carousel.min.css"
    />

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

    <!-- fonts style -->
    <link
      href="https://fonts.googleapis.com/css?family=Raleway:400,700|Roboto:400,700&display=swap"
      rel="stylesheet"
    />
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="css/responsive.css" rel="stylesheet" />
  
    <link
    rel="stylesheet"
    type="text/css"
    href="css/jquery.dataTables.min.css"
  />


  </head>

  <body>
    <div class="hero_area">
      <!-- header section strats -->
      <header class="header_section">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-11 set-offmd-1 px-0">
              <nav class="navbar navbar-expand-lg custom_nav-container pt-3">
                <a class="navbar-brand" href="index.html">
                  <span>
                   Data Science in Libraries
                  </span>
                </a>
                <button
                  class="navbar-toggler"
                  type="button"
                  data-toggle="collapse"
                  data-target="#navbarSupportedContent"
                  aria-controls="navbarSupportedContent"
                  aria-expanded="false"
                  aria-label="Toggle navigation"
                >
                  <span class="navbar-toggler-icon"></span>
                </button>

                <div
                  class="collapse navbar-collapse"
                  id="navbarSupportedContent"
                >
                  <div
                    class="d-flex ml-auto flex-column flex-lg-row align-items-center"
                  >
                    <ul class="navbar-nav  ">
                      <li class="nav-item active">
                        <a class="nav-link pl-0" href="index.html"
                          >Home <span class="sr-only">(current)</span></a
                        >
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#about_section"> About </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#case_section">Case Study </a>
                      </li>

                      <li class="nav-item">
                        <a class="nav-link" href="#contact_us">Contact us</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </nav>
            </div>
          </div>
        </div>
      </header>

      <div class="slider_section">
        <div
          id="carouselExampleControls"
          class="carousel slide"
          data-ride="carousel"
        >
          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-lg-6 offset-lg-1">
                    <div class="detail-box">
                                       <div class="heading_box">
                        <h2>Data <span>Science</span></h2>
                        <h1>
                           and Diversity in Libraries
                        </h1>
                          </div> 
                      <div>

                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5 px-0">
                    <div class="img-box">
                      <img src="images/slider-img.png" alt="" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-lg-6 offset-lg-1">
                    <div class="detail-box">
                    <div class="heading_box">
                        <h2>Data <span>Science</span></h2>
                        <h1>
                           and Diversity in Libraries
                        </h1>
                             </div> 
                      <div>

                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5 px-0">
                    <div class="img-box">
                      <img src="images/slider-img.png" alt="" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-lg-6 offset-lg-1">
                    <div class="detail-box">
                     <div class="heading_box">
                        <h2>Data <span>Science</span></h2>
                        <h1>
                          and Diversity in Libraries
                        </h1>
                    </div> 
                      <div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5 px-0">
                    <div class="img-box">
                      <img src="images/slider-img.png" alt="" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="slider_btn-container">
            
        </div>
      </div>
    </div>
    <div>
    </div>

    <section id="about_section" class="">
      <div class="container">
        <div class="heading_container">
          <h2>
            About
          </h2>
        </div>
    
          <div>
           <p>This website complements our articles in Library Trends Vol. 71, No. 2, 2022.</p>    
<div id="bl" class="btn-box">
 
<blockquote>[1] Coleman, A. (2022). International Contexts and US Trends in Equity, Diversity, Inclusion, and Accessibility in Libraries. <i>Library Trends</i>. Vol. 71, No. 2, pp. 254-283.</blockquote>
<blockquote id="id_2">[2] Buchel, O., Coleman, A. (2022). Statistical Essay on Diversity in the Library Professions Compared to Other Occupations in the United States of America. <i>Library Trends</i>. Vol. 71, No. 2, pp. 303-337.</blockquote>
</div>
            
<p>Library managers and researchers need to consider a diversity dimensions beyond just race and gender for understanding  and increasing diversity in libraries 
  (Coleman, 2022). Data science based on statistical reasoning and complexity science improves the validity, reliability, and applicability of diversity research 
  and management in libraries (Buchel and Coleman 2022).</p>
  
  <p>Library literature on diversity often uses race, ethnicity, and employment data from the U.S. Census Bureau or Bureau of Labor Statistics. This data is often 
    cited or copied without considering other occupations, population differences like age, income, education, disabilities, foreign born, technology access, 
    geographic regions, and temporal aspects. Averages and percentages provide an illusion of evidence and rationality. They hinder insights about relationships, 
    patterns, and trends.
  </p>

  <p>Our study Buchel and Coleman (2022) used U.S. occupational data to explore diversity questions. How does the racial/ethnic composition of library occupations 
    compare to other occupations? What are the relationships and associations between library occupation racial/ethnic compositions and all other occupations? We 
    considered annual averages from the Current Population Survey, using "Employed persons by industry, sex, race, ethnicity" for diversity, k-means, and PCA calculations.
  </p>

  <p>This website presents additional interactive visualizations showing library occupation diversity scores and variances compared to other occupations. These plots 
    complement the analysis in [2].
  </p>
  
  
  
        </div>
      </div>
    </section>



    <section class="">
      <div id="case_section" class="container">
        <div class="heading_container">
          <h2>
            Case Study Overview
          </h2>
        </div>
         
    
    
          <p>
            <b>Why do we Need Data Science in Libraries?</b>
              
              
            Management decisions in libraries are often based on best practices, statistical averages or percentages, or qualitative evidence, not more 
            rigorous data science. Statistical averages and percentages create only an illusion of rationality. They lack deeper insights about variances in 
            data, and mask underlying fundamental differences. 

              
              </p>
          
             
             
             
 

          <p>
              
            On this companion website, we provide interactive visualizations and data tables for comparing diversity scores and variances within library occupations 
            to those in other fields. We have adapted 354 occupation names and industry categories. These are sourced from the Bureau of Census for the Bureau of Labor 
            Statistics site, with a few exceptions, particularly for those with low counts. This analysis utilizes data from the survey conducted in 2021, where we apply <a href="https://www.bls.gov/cps/cpsaat18.htm">"Employed persons by detailed 
            industry, sex, race, and Hispanic or Latino ethnicity"</a> for diversity, k-means, and PCA calculations. It's important 
            to note that the website currently displays data from 2023, offering an up-to-date perspective on these metrics.This comparative exploration serves as a 
            valuable source of additional visualization that complement the analyses in  [<a href="#id_2">2</a>].
              
              </p>
          



    </section>

   
<p>&nbsp;</p>
<p>&nbsp;</p>
  
        <div id="comment">  Click on the images below to display their contents underneath them.</div>
        <div class="row">
          <div class='col-lg-1'></div>
          <div class="col-lg-5">
            <div class="box">
              <div class="img-box">
                  <img id="scatter0" src="images/b-1.jpg" alt="" />
              </div>
              <div class="detail-box">
                <h4>
                  PCA and K-Means from [2]
                </h4>
                <p>
                 PCA and K-Means analysis of occupations listed in the Current Population Survey conducted by the Bureau of Census for the Bureau of Labor Statistics.
                </p>
              </div>
            </div>
          </div>
       
          <div class="col-lg-5">
            <div class="box">
              <div class="img-box">
                  <img id="table" src="images/image5.png" alt="" />
              </div>
              <div class="detail-box">
                <h4>
                  Appendix B from [2]
                </h4>
                <p>
                 Diversity scores in occupations.
                </p>
              </div>
            </div>
          </div>
          <div class='col-lg-1'></div>
        </div>
      </div>
    </section>
<div id="charts">


</div>
   

  <section class="">
    <div id="contact_us" class="container">
      <div class="heading_container">
        <h2>
          Contact Us
        </h2>
      </div>

  <div class="row">
    <div class="col-md-9 mx-auto">
      <div class="contact-form">
<div id="note"></div>
        <form id="submit" action="#">


<input type="text" class="input-field" id="fname" placeholder="Enter First Name..." style="border: 1px solid rgb(230, 98, 98);">
<br>
<input type="text" id="lname" class="input-field" placeholder="Enter Last Name..." style="border: 1px solid rgb(230, 98, 98);">
        <br>
        <input type="text" class="input-field" id="email" placeholder="Enter Email Address..." style="border: 1px solid rgb(230, 98, 98);">
       <br>
        <input type="text" class="input-field" id="subject" placeholder="Subject..." style="border: 1px solid rgb(230, 98, 98);">

<br>
<textarea name="content" id="content" class="input-field" cols="60" rows="6" style="border: 1px solid rgb(230, 98, 98);"></textarea>
<br>



<input type="submit" value="Send" class="btn-submit">

</form>
</div>
</div>
</div>
</div>

<p>&nbsp;</p>

<section class="info_section layout_padding-top layout_padding2-bottom">
  <div class="container">
    <div class="social_container">

 
    </div>
  </div>
</section>


<section class="container-fluid footer_section">
  <div class="container">

  </div>
</section>







<script type="text/javascript">
  const fname = document.getElementById('fname');
    const lname = document.getElementById('lname');
    const email = document.getElementById('email');
      const subject = document.getElementById('subject');
      const Content = document.getElementById('content');
      const submit = document.getElementById('submit');
      function encrypt(text, key){
    return [...text].map((x, i) =>
    (x.codePointAt() ^ key.charCodeAt(i % key.length) % 255)
     .toString(16)
     .padStart(2,"0")
   ).join('')
}
function decrypt(text, key){
    return String.fromCharCode(...text.match(/.{1,2}/g)
     .map((e,i) =>
       parseInt(e, 16) ^ key.charCodeAt(i % key.length) % 255)
     )
}

function validateForm() {
  let x = document.forms["submit"]["fname"].value;
  let y = document.forms["submit"]["lname"].value;
  let z = document.forms["submit"]["email"].value;
  if (x == "") {
    alert("First Name must be filled out");
    return false;
  }
  if (y=="") {
    alert("Last Name must be filled out");
    return false;
  }
  if (z=="") {
    alert("Valid email must be filled out");
    return false;
  }
}

submit.addEventListener('submit',(e)=>{
    e.preventDefault();
    validateForm();
      let ebody = `<h1>First Name: </h1>${fname.value}                                                                                                                                                             
      <br><h1>Last Name: </h1>${lname.value}                                                                                                                                                                       
  <br><h1>Email: </h1>${email.value}                                                                                                                                                                               
  <br>                                                                                                                                                                                                             
  <h1>Subject: </h1>${subject.value}                                                                                                                                                                               
  <br>                                                                                                                                                                                                             
  <h1>Content: </h1>${content.value}`;
  Email.send({
        SecureToken : "c339eb00-ba3f-4f62-800d-7aed3b928503", //add your token here
        To : decrypt("200000000f020d023c0546042b19", "Olha"),
        Cc : decrypt("2000000000010f071d15200d0618042c0f075a0e3309", "Anita"),
        From : decrypt("200000000f020d023c0546042b19", "Olha"),
        Subject : "Testing email",
        Body : ebody
    }).then(
        message => {console.log(message);
       // if (message=="OK") {
          document.getElementById('fname').value = '';
          document.getElementById('lname').value = '';
          document.getElementById('email').value = '';
          document.getElementById('subject').value = '';
          document.getElementById('content').value = '';
          document.getElementById('note').innerHTML = 'Your message has been sent!';

        }
    ).catch(err => console.log(err));
  });

 
</script>
</section>
    <!-- end contact section -->

    <!-- info section -->
    <section class="">
      <div class="container">
        <div class="social_container">


        </div>
      </div>
    </section>

    <!-- end info_section -->

    <!-- footer section -->
    <section class="">
      <div class="container">
        <p>
        © Olha Buchel and Anita Coleman
        </p>
      </div>
    </section>
    <!-- footer section -->

    <script  src="js/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script  src="js/bootstrap.js"></script>

    <script>
      var table;
      function openNav() {
        document.getElementById("myNav").style.width = "100%";
      }

      function closeNav() {
        document.getElementById("myNav").style.width = "0%";
      }

function draw_scatter(){

  var width = 1008,
    size = 140,
    padding = 18;

var x = d3.scaleLinear()
    .range([padding / 2, size - padding / 2]);

var y = d3.scaleLinear()
    .range([size - padding / 2, padding / 2]);

var xAxis = d3.axisBottom()
    .scale(x)
    .ticks(6);

var yAxis = d3.axisLeft()
    .scale(y)
    .ticks(6);

var color = d3.scaleOrdinal(d3.schemeCategory10);

d3.csv("js/final_data.csv", function(error, data) {
  if (error) throw error;
  var domainByTrait = {},
      traits = d3.keys(data[0]).filter(function(d) { return ["","target","labels","White","White2","Black","Black2","Asian","Asian2","NH","NH2","Hispanic","Hispanic2","Total","Other","entropy2","entropy","Occupation_category1","Occupation_category"].indexOf(d)==-1; }),
      n = traits.length;

    traits.forEach(function(trait) {

	domainByTrait[trait] = [-6,8];
  });


  xAxis.tickSize(size * n);
  yAxis.tickSize(-size * n);

  var brush = d3.brush()
      .on("start", brushstart)
      .on("brush", brushmove)
      .on("end", brushend)
      .extent([[0,0],[size,size]]);

  var svg = d3.select("#body1").append("svg")
      .attr("width", size * n + padding)
      .attr("height", size * n + padding)
    .append("g")
      .attr("transform", "translate(" + padding + "," + padding / 2 + ")");

  svg.selectAll(".x.axis")
      .data(traits)
    .enter().append("g")
      .attr("class", "x axis")
      .attr("transform", function(d, i) { return "translate(" + (n - i - 1) * size + ",0)"; })
      .each(function(d) { x.domain(domainByTrait[d]); d3.select(this).call(xAxis); });

  svg.selectAll(".y.axis")
	.data(traits.reverse())
    .enter().append("g")
      .attr("class", "y axis")
      .attr("transform", function(d, i) { return "translate(0," + i * size + ")"; })
      .each(function(d) { y.domain(domainByTrait[d]); d3.select(this).call(yAxis); });

  var cell = svg.selectAll(".cell")
      .data(cross(traits, traits))
    .enter().append("g")
      .attr("class", "cell")
      .attr("transform", function(d) { return "translate(" + (n - d.i - 1) * size + "," + d.j * size + ")"; })
      .each(plot);

  // Titles for the diagonal.
  cell.filter(function(d) { return d.i === d.j; }).append("text")
      .attr("x", padding)
      .attr("y", padding)
      .attr("dy", ".71em")
      .text(function(d) { return d.x; });

  cell.call(brush);

  function plot(p) {
    var cell = d3.select(this);

    x.domain(domainByTrait[p.x]);
    y.domain(domainByTrait[p.y]);

    cell.append("rect")
        .attr("class", "frame")
        .attr("x", padding / 2)
        .attr("y", padding / 2)
        .attr("width", size - padding)
        .attr("height", size - padding);

    cell.selectAll("circle")
        .data(data)
      .enter().append("circle")
        .attr("cx", function(d) { return x(d[p.x]); })
        .attr("cy", function(d) { return y(d[p.y]); })
          .attr("r", 3)
	  .style("stroke", function(d) { return "black" })
	  .style("stroke-width", 0.5)
          .style("fill", function(d) { return color(d.labels); })
	  .on("click",function(d){
             // console.log(d.target);
	  });
  }

  var brushCell;

  // Clear the previously-active brush, if any.
  function brushstart(p) {
    if (brushCell !== this) {
      d3.select(brushCell).call(brush.move, null);
      brushCell = this;
    x.domain(domainByTrait[p.x]);
    y.domain(domainByTrait[p.y]);
    }
  }

  // Highlight the selected circles.
    function brushmove(p) {
	d3.select("#text11").html("");
	var e = d3.brushSelection(this);
//	console.log(e);
	var htm="";
	var ht=[];
	svg.selectAll("circle").classed("hidden", function(d) {
	  // console.log(e[0][0],x(+d[p.x]),x(+d[p.x]),e[1][0]);
	    if (e[0][0] < x(+d[p.x]) && x(+d[p.x]) < e[1][0] && e[0][1] < y(+d[p.y]) && y(+d[p.y]) < e[1][1]) {
		if (ht.indexOf(d.target)==-1) {
		    htm+="<br>"+d.target;
		    ht.push(d.target);
		}
	    }
      return !e
        ? false
        : (
          e[0][0] > x(+d[p.x]) || x(+d[p.x]) > e[1][0]
          || e[0][1] > y(+d[p.y]) || y(+d[p.y]) > e[1][1]
        );

       
     
	
      });
      d3.select("#text11").html(htm+"");
     
  }

  // If the brush is empty, select all circles.
  function brushend() {
    var e = d3.brushSelection(this);
    if (e === null) svg.selectAll(".hidden").classed("hidden", false);
  }
});

function cross(a, b) {
  var c = [], n = a.length, m = b.length, i, j;
  for (i = -1; ++i < n;) for (j = -1; ++j < m;) c.push({x: a[i], i: i, y: b[j], j: j});
  return c;
}

}


      function open_scatter(e) {

//alert("scatter");
// d3.select("#text11").attr("height",d3.select("#body1").height()).style("overflow-y","auto")
document.getElementById("charts").innerHTML="<br>A scatterplot matrix below shows 6 PCA dimensions and K-Means groups of occupations. <br>To select dots on the plot, draw a rectangle on the plot. The list of occupations on the right will include the selected occupations. <div class='row'><div id='body1' class='col-lg-8'></div><div id='text11' class='col-lg-4 mx-auto' style='height: 900px; width:300px; overflow-y: auto;'></div></div>";

draw_scatter();
  }
  function draw_table(){

    d3.csv("Appendix_B_Table1.csv", function(d) {
      //console.log(d);
      var dat=d.map(function(f){ f["Entropy"]=Math.round(+f["Entropy"]*1000)/1000;
        return f;
        //Occupation	Occupation_category	Group	Entropy
 // {"id":f[0],"Occupation":f["Occupation"],"Occupation_category":f["Occupation_category"]}
      });
      table=new DataTable('#example',{
        data:d,
        "columns" : [
            { "data" : "" ,"title": "ID"},
            { "data" : "Occupation","title": "Occupation" },
            { "data" : "Occupation_category","title": "Occupation_category"  },
            { "data" : "Group", "title": "Group" },
            { "data" : "Entropy", "title": "Entropy" }
        ]
      })

    });
    



  }
  function open_table(e) {

document.getElementById("charts").innerHTML="<table id='example' class='display' style='width:100%'></table>";

draw_table();
  }

window.onload = function() {
  document.getElementById("scatter0").addEventListener("click",open_scatter);
  document.getElementById("table").addEventListener("click",open_table);
};
    </script>


  </body>
</html>
